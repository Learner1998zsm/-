"use strict";(self["webpackChunkhmtt"]=self["webpackChunkhmtt"]||[]).push([[288],{4580:function(t,s,i){i.r(s),i.d(s,{default:function(){return l}});var e=function(){var t=this,s=t._self._c;return s("div",[s("van-search",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{shape:"round",background:"#007bff",placeholder:"请输入搜索关键词"},on:{input:t.onInput,search:t.searchFn},scopedSlots:t._u([{key:"left",fn:function(){return[s("van-icon",{staticStyle:{"margin-right":"15px"},attrs:{name:"arrow-left",size:"0.48rem",color:"#fff"},on:{click:function(s){return t.$router.back()}}})]},proxy:!0}]),model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}}),t.keyword?s("div",{staticClass:"suggest"},t._l(t.suggestList,(function(i,e){return s("li",{key:e,domProps:{innerHTML:t._s(t.highlight(t.keyword,i))},on:{click:function(s){return t.searchFn(i)}}})})),0):s("div",{staticClass:"history"},[s("div",{staticClass:"history-header"},[s("span",[t._v("搜索历史")]),s("van-icon",{attrs:{name:"delete",size:"0.426667rem"},on:{click:t.removeHistory}})],1),s("div",{staticClass:"history-body"},t._l(t.historyList,(function(i,e){return s("span",{key:e,staticClass:"history-item",on:{click:function(s){return t.searchFn(i)}}},[t._v(t._s(i))])})),0)])],1)},r=[];const n=(t,s)=>{const i=new RegExp(t,"ig");return s.replace(i,(t=>`<span style="color: #ff0000;">${t}</span>`))};var o=i(7247),a={name:"Search",data(){return{keyword:"",suggestList:[],timer:null,historyList:JSON.parse((0,o.cF)("his"))||[]}},methods:{onInput(){0===this.keyword.length?this.suggestList=[]:(clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(this.keyword.trim()){const t=await this.$API.reqSuggestList(this.keyword),{options:s}=t.data.data;-1===s.indexOf(null)&&(this.suggestList=s)}}),500))},searchFn(t){t.trim()&&(this.$router.push(`search/${t}`),-1===this.historyList.indexOf(t)&&(this.historyList.push(t),(0,o.po)("his",JSON.stringify(this.historyList))))},removeHistory(){(0,o.Li)("his"),this.historyList=[]},highlight:n}},c=a,h=i(1001),u=(0,h.Z)(c,e,r,!1,null,"367d994b",null),l=u.exports}}]);
//# sourceMappingURL=Search.85701b85.js.map