"use strict";(self["webpackChunkhmtt"]=self["webpackChunkhmtt"]||[]).push([[438],{277:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var i=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"黑马头条 - 登录"}}),t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{required:"",name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写11位手机号",pattern:/1[3-9]\d{9}/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),t("van-field",{attrs:{required:"",type:"password",name:"code",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写6位密码",pattern:/\d{6}/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",loading:e.loading,"loading-text":"正在登录ing...",disabled:e.loading}},[e._v("登录")])],1)],1)],1)},o=[],a=(n(5623),n(4966),n(4933),n(3671),n(3979),n(6121),n(9299)),l=n(6369),s=n(855),r=n(3370),c=0;function u(e){e?(c||document.body.classList.add("van-toast--unclickable"),c++):(c--,c||document.body.classList.remove("van-toast--unclickable"))}var d=n(7846),f=n(9858),h=n(4958),m=(0,s.d)("toast"),v=m[0],p=m[1],g=v({mixins:[(0,d.e)()],props:{icon:String,className:null,iconPrefix:String,loadingType:String,forbidClick:Boolean,closeOnClick:Boolean,message:[Number,String],type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:"toggleClickable",forbidClick:"toggleClickable"},methods:{onClick:function(){this.closeOnClick&&this.close()},toggleClickable:function(){var e=this.value&&this.forbidClick;this.clickable!==e&&(this.clickable=e,u(e))},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")},genIcon:function(){var e=this.$createElement,t=this.icon,n=this.type,i=this.iconPrefix,o=this.loadingType,a=t||"success"===n||"fail"===n;return a?e(f.Z,{class:p("icon"),attrs:{classPrefix:i,name:t||n}}):"loading"===n?e(h.Z,{class:p("loading"),attrs:{type:o}}):void 0},genMessage:function(){var e=this.$createElement,t=this.type,n=this.message;if((0,r.Xq)(n)&&""!==n)return"html"===t?e("div",{class:p("text"),domProps:{innerHTML:n}}):e("div",{class:p("text")},[n])}},render:function(){var e,t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[p([this.position,(e={},e[this.type]=!this.icon,e)]),this.className],on:{click:this.onClick}},[this.genIcon(),this.genMessage()])])}}),y=n(1015),b={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},k={},C=[],x=!1,$=(0,a.Z)({},b);function Z(e){return(0,r.Kn)(e)?e:{message:e}}function S(e){return document.body.contains(e)}function O(){if(r.sk)return{};if(C=C.filter((function(e){return!e.$el.parentNode||S(e.$el)})),!C.length||x){var e=new(l.ZP.extend(g))({el:document.createElement("div")});e.$on("input",(function(t){e.value=t})),C.push(e)}return C[C.length-1]}function P(e){return(0,a.Z)({},e,{overlay:e.mask||e.overlay,mask:void 0,duration:void 0})}function w(e){void 0===e&&(e={});var t=O();return t.value&&t.updateZIndex(),e=Z(e),e=(0,a.Z)({},$,k[e.type||$.type],e),e.clear=function(){t.value=!1,e.onClose&&(e.onClose(),e.onClose=null),x&&!r.sk&&t.$on("closed",(function(){clearTimeout(t.timer),C=C.filter((function(e){return e!==t})),(0,y.Z)(t.$el),t.$destroy()}))},(0,a.Z)(t,P(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout((function(){t.clear()}),e.duration)),t}var E=function(e){return function(t){return w((0,a.Z)({type:e},Z(t)))}};["loading","success","fail"].forEach((function(e){w[e]=E(e)})),w.clear=function(e){C.length&&(e?(C.forEach((function(e){e.clear()})),C=[]):x?C.shift().clear():C[0].clear())},w.setDefaultOptions=function(e,t){"string"===typeof e?k[e]=t:(0,a.Z)($,e)},w.resetDefaultOptions=function(e){"string"===typeof e?k[e]=null:($=(0,a.Z)({},b),k={})},w.allowMultiple=function(e){void 0===e&&(e=!0),x=e},w.install=function(){l.ZP.use(g)},l.ZP.prototype.$toast=w;var L=w,q=n(3505),T={name:"Login",data(){return{user:{mobile:"18896656627",code:"246810"},loading:!1}},methods:{async onSubmit(e){this.loading=!0;try{const t=await this.$API.reqLogin(e);(0,q.o4)(t.data.data.token),localStorage.setItem("refresh_token",t.data.data.refresh_token),this.$router.replace(this.$route.query.path||"/layout/home"),L.success("登录成功")}catch(t){L.fail("账号或密码错误")}this.loading=!1}}},A=T,I=n(1001),N=(0,I.Z)(A,i,o,!1,null,"163da192",null),_=N.exports}}]);
//# sourceMappingURL=Login.80243d08.js.map