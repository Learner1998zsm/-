{"version":3,"file":"js/Home.0cbf65a8.js","mappings":"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","sources":["webpack://hmtt/./src/views/Layout/Home/index.vue","webpack://hmtt/./src/views/Layout/Home/ChannelEdit/index.vue","webpack://hmtt/src/views/Layout/Home/ChannelEdit/index.vue","webpack://hmtt/./src/views/Layout/Home/ChannelEdit/index.vue?256c","webpack://hmtt/./src/views/Layout/Home/ChannelEdit/index.vue?af8a","webpack://hmtt/./src/views/Layout/Home/ArticleList/index.vue","webpack://hmtt/src/views/Layout/Home/ArticleList/index.vue","webpack://hmtt/./src/views/Layout/Home/ArticleList/index.vue?1854","webpack://hmtt/./src/views/Layout/Home/ArticleList/index.vue?3c03","webpack://hmtt/src/views/Layout/Home/index.vue","webpack://hmtt/./src/views/Layout/Home/index.vue?53ed","webpack://hmtt/./src/views/Layout/Home/index.vue?7148"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"./img/toutiao_logo.4653c8be.png\"),\"alt\":\"\"}})]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"0.48rem\",\"color\":\"#fff\"},on:{\"click\":function($event){return _vm.$router.push('/search')}}})]},proxy:true}])})],1),_c('div',{staticClass:\"main\"},[_c('van-tabs',{attrs:{\"color\":\"#007bff\",\"animated\":\"\",\"sticky\":\"\",\"offset-top\":\"1.226667rem\"},on:{\"change\":_vm.tabChangeHandler},model:{value:(_vm.channel_id),callback:function ($$v) {_vm.channel_id=$$v},expression:\"channel_id\"}},_vm._l((_vm.userChannels),function(item){return _c('van-tab',{key:item.id,attrs:{\"name\":item.id,\"title\":item.name}},[_c('ArticleList',{attrs:{\"id\":_vm.channel_id}})],1)}),1),_c('van-icon',{staticClass:\"moreChannels\",attrs:{\"name\":\"plus\",\"size\":\"0.37333rem\",\"color\":\"#000\"},on:{\"click\":_vm.addChannel}})],1),_c('van-popup',{staticClass:\"channel_popup\",attrs:{\"get-container\":\"body\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('ChannelEdit',{ref:\"edit\",attrs:{\"userChannels\":_vm.userChannels,\"moreChannels\":_vm.moreChannels},on:{\"cancelEdit\":_vm.closePopup,\"deleteChannelEV\":_vm.deleteChannelFn,\"addChannelEV\":_vm.addChannelFn}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"title\":\"频道管理\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.37333rem\",\"color\":\"#fff\"},on:{\"click\":function($event){return _vm.$emit('cancelEdit')}}})]},proxy:true}])})],1),_c('div',[_c('div',{staticClass:\"title-box\"},[_c('span',[_vm._v(\" 我的频道 \"),(!_vm.isEdit)?_c('span',{staticClass:\"small-title\",on:{\"click\":function($event){return _vm.$emit('cancelEdit')}}},[_vm._v(\"点击进入频道\")]):_c('span',{staticClass:\"small-title\"},[_vm._v(\"点击删除频道\")])]),_c('span',{on:{\"click\":function($event){_vm.isEdit = !_vm.isEdit}}},[_vm._v(\" \"+_vm._s(_vm.isEdit ? '完成' : '编辑')+\" \")])]),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.userChannels),function(item,index){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.deleteChannels(item, index)}}},[_c('div',{staticClass:\"channel-item\"},[_vm._v(\" \"+_vm._s(item.name)+\" \"),(item.name !== '推荐' && _vm.isEdit)?_c('van-badge',{staticClass:\"cross-badge\",attrs:{\"color\":\"transparent\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.32rem\",\"color\":\"#cfcfcf\"}})]},proxy:true}],null,true)}):_vm._e()],1)])}),1),_vm._m(0),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.moreChannels),function(item){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.addChannel(item)}}},[_c('div',{staticClass:\"channel-item\"},[_vm._v(_vm._s(item.name))])])}),1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"title-box\"},[_c('span',[_vm._v(\"点击添加更多频道：\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 头部导航 -->\r\n    <div>\r\n      <van-nav-bar title=\"频道管理\">\r\n        <template #right>\r\n          <van-icon name=\"cross\" size=\"0.37333rem\" color=\"#fff\" @click=\"$emit('cancelEdit')\" />\r\n        </template>\r\n      </van-nav-bar>\r\n    </div>\r\n    <!-- 频道编辑区域 -->\r\n    <div>\r\n      <!-- 头部标题及编辑按钮 -->\r\n      <div class=\"title-box\">\r\n        <span>\r\n          我的频道\r\n          <span class=\"small-title\" v-if=\"!isEdit\" @click=\"$emit('cancelEdit')\">点击进入频道</span>\r\n          <span class=\"small-title\" v-else>点击删除频道</span>\r\n        </span>\r\n        <span @click=\"isEdit = !isEdit\"> {{ isEdit ? '完成' : '编辑' }} </span>\r\n      </div>\r\n      <van-row type=\"flex\">\r\n        <van-col span=\"6\" v-for=\"(item, index) in userChannels\" :key=\"item.id\" @click=\"deleteChannels(item, index)\">\r\n          <div class=\"channel-item\">\r\n            {{ item.name }}\r\n            <van-badge v-if=\"item.name !== '推荐' && isEdit\" class=\"cross-badge\" color=\"transparent\">\r\n              <template #content>\r\n                <van-icon name=\"cross\" size=\"0.32rem\" color=\"#cfcfcf\" />\r\n              </template>\r\n            </van-badge>\r\n          </div>\r\n        </van-col>\r\n      </van-row>\r\n      <!-- 下方未选频道标题 -->\r\n      <div class=\"title-box\">\r\n        <span>点击添加更多频道：</span>\r\n      </div>\r\n      <van-row type=\"flex\">\r\n        <van-col span=\"6\" v-for=\"item in moreChannels\" :key=\"item.id\" @click=\"addChannel(item)\">\r\n          <div class=\"channel-item\">{{ item.name }}</div>\r\n        </van-col>\r\n      </van-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ChannelEdit',\r\n  props: {\r\n    userChannels: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    moreChannels: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 切换编辑状态, true为编辑状态\r\n      isEdit: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击用户已选择的频道的回调\r\n    deleteChannels(channel, index) {\r\n      if (!this.isEdit) {\r\n        // 非编辑状态\r\n        this.$emit('cancelEdit', channel.id)\r\n      } else {\r\n        // 编辑状态\r\n        // 若点击的是推荐, 则返回推荐频道\r\n        if (channel.name == '推荐') return this.$emit('cancelEdit', 0)\r\n        // 否则删除该频道\r\n        this.$emit('deleteChannelEV', index)\r\n      }\r\n    },\r\n    addChannel(channel) {\r\n      if (this.isEdit) {\r\n        this.$emit('addChannelEV', channel)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.title-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0 6px;\r\n  font-size: 14px;\r\n  line-height: 28px;\r\n  .small-title {\r\n    font-size: 12px;\r\n    color: #808080;\r\n  }\r\n}\r\n.channel-item {\r\n  position: relative;\r\n  margin: 5px 5px;\r\n  text-align: center;\r\n  background-color: #fafafa;\r\n  font-size: 12px;\r\n  line-height: 36px;\r\n}\r\n.cross-badge {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -1px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b9964eb2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=b9964eb2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9964eb2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"offset\":\"50\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.articleList),function(item){return _c('ArticleItem',{key:item.art_id,attrs:{\"id\":item.art_id,\"title\":item.title,\"pubdate\":item.pubdate,\"author\":item.aut_name,\"comm-count\":item.comm_count,\"cover\":item.cover},nativeOn:{\"click\":function($event){return _vm.$router.push(`/article_detail?aid=${item.art_id}`)}}})}),1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n      <!-- :immediate-check=\"false\" 阻止onload在初始化时触发, 造成重复请求,导致key重复 -->\r\n      <van-list\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\"没有更多了\"\r\n        :immediate-check=\"false\"\r\n        offset=\"50\"\r\n        @load=\"onLoad\"\r\n      >\r\n        <ArticleItem\r\n          v-for=\"item in articleList\"\r\n          :key=\"item.art_id\"\r\n          :id=\"item.art_id\"\r\n          :title=\"item.title\"\r\n          :pubdate=\"item.pubdate\"\r\n          :author=\"item.aut_name\"\r\n          :comm-count=\"item.comm_count\"\r\n          :cover=\"item.cover\"\r\n          @click.native=\"$router.push(`/article_detail?aid=${item.art_id}`)\"\r\n        />\r\n      </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleItem from '@/components/ArticleItem'\r\nexport default {\r\n  name: 'ArticleList',\r\n  props: ['id'],\r\n  components: { ArticleItem },\r\n  data() {\r\n    return {\r\n      articleList: [],\r\n      loading: false, // 控制下拉刷新\r\n      finished: false, // 没有更多数据时设为true\r\n      timestamp: +new Date(), // 下一次请求的时间戳, 默认值为当前时间戳\r\n      refreshing: false // 下拉刷新\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticleList()\r\n  },\r\n  methods: {\r\n    // flag用于区分下拉刷新和上拉加载\r\n    async getArticleList(flag = 'load') {\r\n      const obj = {\r\n        // 频道id\r\n        channel_id: this.id,\r\n        // 用于获取下一段数据\r\n        timestamp: this.timestamp\r\n      }\r\n      const res = await this.$API.reqArticleList(obj)\r\n      if (res.status === 200) {\r\n        const { results, pre_timestamp } = res.data.data\r\n        if (flag === 'load') {\r\n          // 上拉加载\r\n          // 往列表后面追加数据\r\n          this.articleList = [...this.articleList, ...results]\r\n          // 关闭加载特效\r\n          this.loading = false\r\n        } else {\r\n          // 下拉刷新\r\n          this.articleList = results\r\n          this.refreshing = false\r\n        }\r\n\r\n        // 判断数据是否加载完毕\r\n        if (pre_timestamp === null) return (this.finished = true)\r\n        // 覆盖时间戳\r\n        this.timestamp = pre_timestamp\r\n      }\r\n    },\r\n    // 上划加载更多数据\r\n    onLoad() {\r\n      // 防止切换标签页后用户立即上拉刷新, 导致重复请求初始化数据(因为此时created请求数据还未返回, 再次发请求时间戳相同)\r\n      if (this.articleList.length === 0) return\r\n      // 开启加载特效(组件自动设置)\r\n      // this.loading = true\r\n      // 请求下一页数据\r\n      this.getArticleList()\r\n    },\r\n    // 下拉刷新的回调\r\n    onRefresh() {\r\n      // 重置时间戳\r\n      this.timestamp = +new Date()\r\n      this.getArticleList('refresh')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=43395e11&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <!-- 头部 -->\r\n    <div>\r\n      <van-nav-bar fixed>\r\n        <template #left>\r\n          <img src=\"./img/toutiao_logo.4653c8be.png\" alt=\"\" class=\"logo\" />\r\n        </template>\r\n        <template #right>\r\n          <van-icon name=\"search\" size=\"0.48rem\" color=\"#fff\" @click=\"$router.push('/search')\" />\r\n        </template>\r\n      </van-nav-bar>\r\n    </div>\r\n    <!-- tab标签栏及内容 -->\r\n    <div class=\"main\">\r\n      <van-tabs\r\n        v-model=\"channel_id\"\r\n        color=\"#007bff\"\r\n        animated\r\n        sticky\r\n        offset-top=\"1.226667rem\"\r\n        @change=\"tabChangeHandler\"\r\n      >\r\n        <van-tab v-for=\"item in userChannels\" :name=\"item.id\" :key=\"item.id\" :title=\"item.name\">\r\n          <!-- 文章组件 -->\r\n          <ArticleList :id=\"channel_id\" />\r\n        </van-tab>\r\n      </van-tabs>\r\n      <!-- 添加频道的按钮 -->\r\n      <van-icon class=\"moreChannels\" name=\"plus\" size=\"0.37333rem\" color=\"#000\" @click=\"addChannel\" />\r\n    </div>\r\n    <!-- 频道编辑弹出层 -->\r\n    <van-popup class=\"channel_popup\" v-model=\"show\" get-container=\"body\">\r\n      <!-- 频道编辑组件 -->\r\n      <ChannelEdit\r\n        ref=\"edit\"\r\n        :userChannels=\"userChannels\"\r\n        :moreChannels=\"moreChannels\"\r\n        @cancelEdit=\"closePopup\"\r\n        @deleteChannelEV=\"deleteChannelFn\"\r\n        @addChannelEV=\"addChannelFn\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ChannelEdit from './ChannelEdit'\r\nimport ArticleList from './ArticleList'\r\nexport default {\r\n  name: 'Home',\r\n  components: { ArticleList, ChannelEdit },\r\n  data() {\r\n    return {\r\n      channel_id: 0,\r\n      userChannels: [],\r\n      allChannels: [],\r\n      show: false,\r\n      channelScrollTObj: {} // 保存每个频道滚动条的位置{channel_id: scrollT}\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取所有频道列表\r\n    async getAllChannelList() {\r\n      try {\r\n        const res = await this.$API.reqAllChannelList()\r\n        this.allChannels = res.data.data.channels\r\n      } catch (err) {\r\n        console.log(err.message)\r\n      }\r\n    },\r\n    // 获取用户选择的频道列表\r\n    async getUserChannelList() {\r\n      try {\r\n        const res = await this.$API.reqUserChannelList()\r\n        this.userChannels = res.data.data.channels\r\n      } catch (err) {\r\n        console.log(err.message)\r\n      }\r\n    },\r\n    // tab栏切换的回调\r\n    tabChangeHandler(name, title) {\r\n      this.channel_id = name\r\n      // 设置当前频道滚动条位置\r\n      this.$nextTick(() => {\r\n        document.documentElement.scrollTop = this.channelScrollTObj[this.channel_id]\r\n      })\r\n    },\r\n    // + 回调\r\n    addChannel() {\r\n      this.show = true\r\n      // 每次点击加号,将编辑组件的编辑状态置为false\r\n      this.$nextTick(() => {\r\n        // console.log(this.$refs.edit)\r\n        this.$refs.edit.isEdit = false\r\n      })\r\n    },\r\n    // 关闭弹出框\r\n    closePopup(id) {\r\n      this.show = false\r\n      if (id || id === 0) {\r\n        this.channel_id = id\r\n      }\r\n    },\r\n    // 子组件$emit触发channelEdit事件,设置频道\r\n    deleteChannelFn(index) {\r\n      // 先更新页面\r\n      this.userChannels.splice(index, 1)\r\n      // 同步到后台\r\n      this.syncUserChannels()\r\n    },\r\n    // 添加频道\r\n    addChannelFn(channel) {\r\n      this.userChannels.push(channel)\r\n      // 同步到后台\r\n      this.syncUserChannels()\r\n    },\r\n    // 向后台同步频道设置的方法\r\n    async syncUserChannels() {\r\n      // 后台更新数据\r\n      const channels = this.userChannels.map((item, index) => {\r\n        return {\r\n          id: item.id,\r\n          seq: index + 1\r\n        }\r\n      })\r\n      await this.$API.reqSetChannels(channels)\r\n      this.getUserChannelList()\r\n    },\r\n    // 滚动事件的回调\r\n    scrollFn() {\r\n      // 存储滚动条位置\r\n      this.$route.meta.scrollT = document.documentElement.scrollTop\r\n      // 存储当前频道滚动条位置\r\n      this.channelScrollTObj[this.channel_id] = document.documentElement.scrollTop\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getUserChannelList()\r\n    this.getAllChannelList()\r\n  },\r\n  // 页面切换回的生命周期函数\r\n  // 前提: 组件缓存\r\n  activated() {\r\n    // 监听滚动事件存储滚动位置\r\n    window.addEventListener('scroll', this.scrollFn)\r\n    // 立即设置滚动条位置\r\n    document.documentElement.scrollTop = this.$route.meta.scrollT\r\n  },\r\n\r\n  // 页面切换走的生命周期函数\r\n  // 前提: 组件缓存\r\n  deactivated() {\r\n    // 组件失焦时要移除其滚动事件\r\n    window.removeEventListener('scroll', this.scrollFn)\r\n  },\r\n  computed: {\r\n    // 计算未选择的频道\r\n    moreChannels() {\r\n      const { userChannels, allChannels } = this\r\n      return allChannels.filter(item => {\r\n        return userChannels.every(item1 => {\r\n          return item1.id !== item.id\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.channel_popup {\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n.logo {\r\n  width: 100px;\r\n  height: 30px;\r\n}\r\n.main {\r\n  padding-top: 46px;\r\n}\r\n/deep/ .van-tabs--line .van-tabs__wrap {\r\n  padding-right: 30px;\r\n  background-color: #fff;\r\n}\r\n.moreChannels {\r\n  position: fixed;\r\n  top: 62px;\r\n  right: 8px;\r\n  z-index: 999;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=11aae060&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=11aae060&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11aae060\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","require","proxy","on","$event","$router","push","tabChangeHandler","model","value","channel_id","callback","$$v","expression","_l","userChannels","item","id","name","addChannel","show","ref","moreChannels","closePopup","deleteChannelFn","addChannelFn","staticRenderFns","$emit","_v","isEdit","_s","index","deleteChannels","_e","_m","props","type","default","data","methods","component","onRefresh","refreshing","finished","onLoad","loading","articleList","art_id","title","pubdate","aut_name","comm_count","cover","nativeOn","components","ArticleItem","timestamp","created","results","pre_timestamp","ArticleList","ChannelEdit","allChannels","channelScrollTObj","console","document","seq","scrollFn","activated","window","deactivated","computed"],"sourceRoot":""}